<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>3D Tetris</title>

    <style>
        body {
            margin: 0;
        }

        canvas {
            display: block;
        }
    </style>

    <script>
        document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] +
            ':35729/livereload.js?snipver=1"></' + 'script>')
    </script>
</head>
<body>

<script src="js/vendor/three.js"></script>
<script src="js/vendor/OrbitControls.js"></script>
<script src="js/utils/Vector3.js"></script>
<script src="js/TetrisGame.js"></script>
<script src="js/Render.js"></script>

<script>
    let game = new TetrisGame(10, 10, 10, 1);
    let render = new Render();

    game.setNewTetrominoHandler(function () {
        render.createTetromino(game.current_tetromino.form, game.current_tetromino.pos);
    });

    game_loop = function () {
        game.tick();
        if (game.current_tetromino !== null) {
            render.setTetrominoPosition(game.current_tetromino.pos);
        }

        requestAnimationFrame(game_loop)
    }
    game_loop();

    document.addEventListener('keydown', function (event) {
        switch (event.key) {
            case "a":
                game.input("left");
                break;
            case "d":
                game.input("right");
                break;
            case "w":
                game.input("up");
                break;
            case "s":
                game.input("down");
                break;
            case " ": // Space
                game.input("drop");
                break;
        }
    });
</script>

</body>
</html>